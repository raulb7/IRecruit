{% extends 'IRecruitBundle::layout.html.twig' %}
 
{% form_theme edit_form _self %}
 
{% block form_errors %}
{% spaceless %}
    {% if errors|length > 0 %}
        <ul class="error_list">
            {% for error in errors %}
                <li>{{ error.messageTemplate|trans(error.messageParameters, 'validators') }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endspaceless %}
{% endblock form_errors %}
 
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('bundles/IRecruit/css/job.css') }}" type="text/css" media="all" />
{% endblock %}

{% block content %}
    <h1>Job edit</h1>
    <form action="{{ path('eti_job_update', { 'token': job.token }) }}" method="post" {{ form_enctype(edit_form) }}>
        <table id="job_form">
            <tbody>
                <tr>
                    <th>{{ form_label(edit_form.category) }}</th>
                    <td>
                        {{ form_errors(edit_form.category) }}
                        {{ form_widget(edit_form.category) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(edit_form.type) }}</th>
                    <td>
                        {{ form_errors(edit_form.type) }}
                        {{ form_widget(edit_form.type) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(edit_form.company) }}</th>
                    <td>
                        {{ form_errors(edit_form.company) }}
                        {{ form_widget(edit_form.company) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(edit_form.file) }}</th>
                    <td>
                        {{ form_errors(edit_form.file) }}
                        {{ form(edit_form.file) }}
                    </td>
                </tr>
                
                {% if (job.logo) %}
                    <tr>
                        <th>The existent logo</th>
                        <td>
                            <img src="/uploads/jobs/{{ job.logo }}" alt="{{ job.logo }}" />
                        </td>
                    </tr>
                {% endif %}

                <tr>
                    <th>{{ form_label(edit_form.url) }}</th>
                    <td>
                        {{ form_errors(edit_form.url) }}
                        {{ form_widget(edit_form.url) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(edit_form.position) }}</th>
                    <td>
                        {{ form_errors(edit_form.position) }}
                        {{ form_widget(edit_form.position) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(edit_form.location) }}</th>
                    <td>
                        {{ form_errors(edit_form.location) }}
                        {{ form_widget(edit_form.location) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(edit_form.description) }}</th>
                    <td>
                        {{ form_errors(edit_form.description) }}
                        {{ form_widget(edit_form.description) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(edit_form.howToApply) }}</th>
                    <td>
                        {{ form_errors(edit_form.howToApply) }}
                        {{ form_widget(edit_form.howToApply) }}
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(edit_form.isPublic) }}</th>
                    <td>
                        {{ form_errors(edit_form.isPublic) }}
                        {{ form_widget(edit_form.isPublic) }}
                        <br /> Whether the job can also be published on affiliate websites or not.
                    </td>
                </tr>
                <tr>
                    <th>{{ form_label(edit_form.email) }}</th>
                    <td>
                        {{ form_errors(edit_form.email) }}
                        {{ form_widget(edit_form.email) }}
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr>
                    <td>
                        {{ form_widget(edit_form.submit) }}
                    </td>
                    <td>
                        <a href="{{ url('eti_job_preview', { 'token': job.token, 'company': job.companySlug, 'location': job.locationSlug, 'position': job.positionSlug }) }}">
                            Preview job
                        </a>                    
                    </td>
                </tr>
            </tfoot>
        </table>
        {{ form_rest(edit_form) }}
    {{ form_end(edit_form) }}
{% endblock %}